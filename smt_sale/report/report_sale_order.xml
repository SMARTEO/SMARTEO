<odoo>
    <data>

        <template id="sale_report_templates_inh_nexources" inherit_id="sale.report_saleorder_document">
            <!--             
            <xpath expr="//tr[hasclass('o_total')]/td[1]" position="replace">
                <td name="td_amount_total_label">
                    <strong>Total TTC</strong>
                </td>
            </xpath> -->
            <!-- <xpath expr="//div[@id='total']/div/table/tr[1]/td[1]" position="replace">
                    <td class="border-right border-dark">
                        <strong>Total HT</strong>
                    </td>
                </xpath> -->
            <!-- <xpath expr="//t[@t-foreach='doc.amount_by_group']" position="replace">

                <tr style="">
                    <td>
                        <strong>Total TVA</strong>
                    </td>
                    <td class="text-right o_price_total">
                        <span t-field="doc.amount_tax" t-option="{'widget': 'monetary', 'display_currency': doc.pricelist_id.currency_id}" />
                    </td>
                </tr>
            </xpath> -->

            <xpath expr="//t[@t-set='information_block']/.." position="attributes">
                <attribute name="t-if">doc.partner_id or doc.partner_shipping_id or doc.partner_invoice_id</attribute>
            </xpath>

            <xpath expr="//td[@name='td_quantity']" position="replace">
                <td name="td_quantity" class="text-right">
                    <span t-field="line.product_uom_qty" />
                </td>
            </xpath>
            <xpath expr="//div[@id='total']/div" position="attributes">
                <attribute name="t-attf-class">#{'col-4' if report_type != 'html' else 'col-sm-7 col-md-5'}</attribute>
            </xpath>
            <xpath expr="//div[@id='total']/div" position="before">
                <div t-att-class="'col-sm-5 col-md-7' if report_type=='html' else 'col-8 pull-left mb-20'">
                    <div>
                        <t t-if="doc.state == 'draft'">
                            <strong>Arrêté(e) la presente devis à la somme de </strong>
                            &#160;
                        </t>
                        <t t-else="">
                            <strong>Arrêté(e) la presente commande à la somme de </strong>
                            &#160;
                        </t>
                        <span t-esc="doc.currency_id.with_context(lang=doc.partner_id.lang or 'en_US').amount_to_text(doc.amount_total).upper()" />
                        &#160;
                    </div>
                </div>
            </xpath>

            <xpath expr="//table[hasclass('o_main_table')]/thead/tr/th[3]" position="replace">
                <th class="text-right" style="min-width: 11em !important;">Prix unitaire HT</th>
            </xpath>
            <xpath expr="//div[@id='informations']/div[6]" position="after">
                <div class="col-auto col-3 mw-100 mb-2">
                    <strong>Conditions de paiement:</strong>
                    <p class="m-0" t-field="doc.payment_term_id" />
                </div>
            </xpath>
            <xpath expr="//table[hasclass('o_main_table')]/thead/tr[1]" position="attributes">
                <attribute name="style">font-size: 10px !important;</attribute>
            </xpath>
            <xpath expr="//table[hasclass('o_main_table')]/thead/tr/th[last()]" position="replace">
                <th name="th_subtotal" class="text-right">
                    <t groups="account.group_show_line_subtotals_tax_excluded">Montant HT</t>
                    <t groups="account.group_show_line_subtotals_tax_included">Total Price</t>
                </th>
            </xpath>
            <xpath expr="//t[@t-set='information_block']" position="replace">
                <t t-set="information_block">
                    <strong t-if="doc.partner_shipping_id == doc.partner_invoice_id">Addresse de livraison et de facturation:</strong>
                    <strong t-if="doc.partner_shipping_id != doc.partner_invoice_id">Addresse de facturation:</strong>
                    <div t-field="doc.partner_invoice_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;, &quot;phone&quot;], &quot;no_marker&quot;: True, &quot;phone_icons&quot;: True}" />
                    <div>
                        <span t-if="doc.partner_id.nif">NIF :</span>
                        <span t-field="doc.partner_id.nif" />
                        <span t-if="doc.partner_id.nif">/</span>
                        <span t-if="doc.partner_id.stat">STAT :</span>
                        <span t-field="doc.partner_id.stat" />
                        <br />
                        <span t-if="doc.partner_id.rcs">RCS :</span>
                        <span t-field="doc.partner_id.rcs" />
                        <span t-if="doc.partner_id.rcs">/</span>
                        <span t-if="doc.partner_id.cif">CIF :</span>
                        <span t-field="doc.partner_id.cif" />
                    </div>
                    <br />
                    <t t-if="doc.partner_shipping_id != doc.partner_invoice_id">
                        <strong>Addresse de livraison:</strong>
                        <div t-field="doc.partner_shipping_id" t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;name&quot;, &quot;phone&quot;], &quot;no_marker&quot;: True, &quot;phone_icons&quot;: True}" />
                    </t>
                </t>
            </xpath>
            <xpath expr="//table[hasclass('o_main_table')]/thead/tr[1]" position="attributes">
                <attribute name="style">font-size: 11px !important; </attribute>
            </xpath>
            <xpath expr="//table[hasclass('o_main_table')]/thead/tr" position="attributes">
                <attribute name="style">page-break-inside: avoid !important; page-break-after: auto;</attribute>
            </xpath>
            <xpath expr="//table[hasclass('o_main_table')]/tbody/t/tr" position="attributes">
                <attribute name="style">page-break-inside: avoid !important; page-break-after: auto;</attribute>
            </xpath>
            <xpath expr="//table[hasclass('o_main_table')]/thead" position="attributes">
                <attribute name="style">display: table-header-group;</attribute>
            </xpath>
            <xpath expr="//table[hasclass('o_main_table')]/thead" position="attributes">
                <attribute name="style">page-break-inside: auto;</attribute>
            </xpath>

        </template>

    </data>
</odoo>